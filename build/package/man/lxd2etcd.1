.TH LXD2ETCD 1

.SH NAME
lxd2etcd \- lxd2etcd daemon.

.SH SYNOPSIS
.BR lxd2etcd
.BR [\-d]
.BR [\-t]
.BR [\-\-no\-color]
.BI [\-c " <file>"]
.br
.BR lxd2etcd
.BR \-v

.SH DESCRIPTION
.B lxd2etcd
is a daemon that connects to lxd and reports informations about networks and containers into etcd.

Two keys are stored into etcd:

* \fI/lxd/<hostname>/networks\fR containing a JSON structured as follow:

    {
    "<network1_name>: {
        "mac": "<network1_interface_mac_address>"
      },
    "<network2_name>: {
        "mac": "<network2_interface_mac_address>"
      },
    [...]
    }

* \fI/lxd/<hostname>/containers\fR containing a JSON structured as follow:

    {
    "<container1_name>": {
        "status": "<container_status>",
        "default_interface": "<default_interface_from_config_file>",
        "default_ipv4": "<list_of_ipv4_addresses_with_netmask_on_default_interface>",
        "default_ipv6": "<list_of_ipv6_addresses_with_netmask_on_default_interface>",
        "node_ip": "<node_ip_from_config_file>",
        "netdevs": {
            "<interface1_name>": {
                "network": "<lxd_network_name>",
                "port": "<lxd_interface_name>",
                "mac": "<interface1_mac_address>",
                "ipv4": "<list_of_ipv4_addresses_with_netmask>",
                "ipv6": "<list_of_ipv6_addresses_with_netmask>"
              },
            "<interface2_name>": {
                "network": "<lxd_network_name>",
                "port": "<lxd_interface_name>",
                "mac": "<interface2_mac_address>",
                "ipv4": "<list_of_ipv4_addresses_with_netmask>",
                "ipv6": "<list_of_ipv6_addresses_with_netmask>"
              },
            [...]
          }
      },
    "<container2_name>": {
        "status": "<container_status>",
        "default_interface": "<default_interface_from_config_file>",
        "default_ipv4": "<list_of_ipv4_addresses_with_netmask_on_default_interface>",
        "default_ipv6": "<list_of_ipv6_addresses_with_netmask_on_default_interface>",
        "node_ip": "<node_ip_from_config_file>",
        "netdevs": {
            "<interface1_name>": {
                "network": "<lxd_network_name>",
                "port": "<lxd_interface_name>",
                "mac": "<interface1_mac_address>",
                "ipv4": "<list_of_ipv4_addresses_with_netmask>",
                "ipv6": "<list_of_ipv6_addresses_with_netmask>"
              },
            "<interface2_name>": {
                "network": "<lxd_network_name>",
                "port": "<lxd_interface_name>",
                "mac": "<interface2_mac_address>",
                "ipv4": "<list_of_ipv4_addresses_with_netmask>",
                "ipv6": "<list_of_ipv6_addresses_with_netmask>"
              },
            [...]
          }
      },
    [...]
    }

.SH OPTIONS
.TP
.BR \-h ", " \-\-help
Show the help.
.TP
.BR \-v ", " \-\-version
Show the version infos.
.TP
.BR \-d ", " \-\-debug
Activate debug logging on stderr. (Override config parameter)
.TP
.BR \-t ", " \-\-trace
Activate trace logging on stderr. (Override config parameter)
.TP
.BR \-\-no\-color
Disable log coloring.
.TP
.BR \-c ", " \-\-config =\fIfile\fR
Path to the config file (Default: /etc/lxd2etcd.yml)


.SH SIGNALS

.TP
.BR SIGUSR2
.br
toggle between INFO and DEBUG log levels.
.LP


.SH FILES
.TP
.IR /etc/lxd2etcd.yml
configuration file.

.SH SEE ALSO
.TP
\fBlxd2etcd.yml\fR(5)
